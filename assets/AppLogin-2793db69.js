import{r,a as E,j as s}from"./index-272213f6.js";const f="/React_FormBuilder/assets/User-f9fa29a7.svg",R="/React_FormBuilder/assets/Lock-02eeb277.svg",_="/React_FormBuilder/assets/Unlock-c1930f46.svg";function b(){const[n,c]=r.useState(""),[i,x]=r.useState(""),[o,m]=r.useState(""),[l,j]=r.useState(!1),[d,a]=r.useState("");let v=E();const[S,u]=r.useState(""),y=window.localStorage.getItem("token"),[t,g]=r.useState(!1),N=()=>{try{fetch(`https://form-api-lilac.vercel.app/${t?"register":"login"}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t?{name:n,password:o}:{name:n,email:i,password:o})}).then(e=>e.json()).then(e=>{e.id||e._id?(u(t?e._id:e.id),window.localStorage.setItem("token",t?e._id:e.id)):a(e.message)})}catch(e){console.log("HAHA ",e.message)}},k=()=>{try{fetch("https://form-api-lilac.vercel.app/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n,email:i,password:o})}).then(e=>e.json()).then(e=>{e.id||e._id?(u(t?e._id:e.id),window.localStorage.setItem("token",t?e._id:e.id)):a(e.message)})}catch(e){console.log("HAHA ",e.message)}},p=e=>{if(e.preventDefault(),t&&(console.log("Inside for mail"),i!=""&&n!=""&&o!="")){console.log("email ",i," name ",n," password ",o);let I=/^[^ ]+@[^ ]+\.[a-z]{2,3}$/;if(i.match(I))return k()}if(!t)return console.log("InsideOUT for mail"),N()},w=e=>{if(e=="No such user exist")return s.jsxs(s.Fragment,{children:["No such account exist, click here to"," ",s.jsx("b",{onClick:h,children:"register"})]});if(e=="incorrect email/password"||e=="incorrect username/password")return s.jsx(s.Fragment,{children:e});if(e=="Username already exist"||e=="Email already exist")return s.jsx(s.Fragment,{children:e})};r.useEffect(()=>{c(""),m("")},[t]),r.useEffect(()=>{y&&v("/user")},[S]);const h=()=>{a(""),t&&g(!1),t||g(!0)};return s.jsx(s.Fragment,{children:s.jsx("div",{className:"AppLogin",children:s.jsxs("div",{className:"AppLoginForm",children:[s.jsx("div",{className:"topPart",children:s.jsx("h2",{children:t?"REGISTER":"LOGIN"})}),s.jsx("div",{className:"formPart",children:s.jsxs("form",{onSubmit:p,children:[s.jsxs("div",{className:"formInputs",children:[s.jsx("img",{src:f}),s.jsx("input",{type:"text",value:n,onChange:e=>{a(""),c(e.target.value)},placeholder:"userName",autoComplete:"off"})]}),t?s.jsxs("div",{className:"formInputs",children:[s.jsx("img",{src:f}),s.jsx("input",{type:"text",value:i,onChange:e=>{a(""),x(e.target.value)},placeholder:"email",autoComplete:"off"})]}):null,s.jsxs("div",{className:"formInputs",children:[s.jsx("input",{type:l?"text":"password",value:o,onChange:e=>{a(""),m(e.target.value)},placeholder:"Enter your password"}),s.jsx("img",{style:o?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"pointer"},src:l?_:R,onClick:()=>j(!l)})]}),s.jsx("button",{onClick:p,children:t?"REGISTER":"LOGIN"}),d?s.jsx("h3",{className:"registerorlogin",style:{color:"red",textAlign:"center"},children:w(d)}):s.jsxs("h3",{className:"registerorlogin",children:[t?"allready":"not"," a member ?"," ",s.jsx("b",{onClick:h,children:t?"Login":"Register"})]})]})})]})})})}export{b as default};
