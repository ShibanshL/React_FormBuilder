import{a as ee,u as D,c as te,s as se,r as l,j as e}from"./index-272213f6.js";import{c as ne}from"./Cross 2-f8268ff6.js";import{f as ie,b as oe,p as ae}from"./APIREQ-8aa8e91c.js";function ce(){const f=window.localStorage.getItem("token");let O=ee();const B=D(t=>t.page),E=D(t=>t.setPage),[m,u]=te(t=>[t.message,t.setMessage],se),[d,I]=l.useState(""),[w,Q]=l.useState(""),[R,A]=l.useState(0),[T,y]=l.useState(!1),[F,S]=l.useState(!1),[j,N]=l.useState(0),[s,g]=l.useState([]),[k,p]=l.useState(!1),[b,P]=l.useState(""),[h,L]=l.useState([]),[H,M]=l.useState([]),[W,_]=l.useState(!1),[$,q]=l.useState(!1),[C,z]=l.useState(""),[v,U]=l.useState(""),[Y,x]=l.useState("");l.useEffect(()=>{f||O("/")},[]),l.useEffect(()=>{ie({setLoading:_,setuserData:M,globalToken:f})},[f]),l.useEffect(()=>{setInterval(()=>{x("")},3e3)},[Y]),l.useEffect(()=>{E("BUILD_FORM")},[]);const G=()=>{let t=0,o=0,n=0,i=0,r={id:j,question:"",answerType:"",isOpen:!1,multiselect:!1,required:!1,options:[]};if(d){if(s.length==0)s.push(r),N(j+1);else if(s.length<20){for(let a=0;a<s.length;a++)if(s[a].question==""&&(S(!0),t=t+1),s[a].answerType==""&&(s[a].question!=""&&u("Please select an answer"),o=o+1),s[a].multiselect==!0&&s[a].options.length<2&&(n=n+1,p(!0)),s[a].answerType=="Options")for(let c=0;c<s[a].options.length;c++)s[a].options.length<2?(n=n+1,u("Please at least have 2 options"),p(!0)):(s[a].options[c].OptionSub==null||s[a].options[c].OptionSub==""||s[a].options[c].OptionSub==" "||s[a].options[c].OptionSub.length==0)&&(console.log("Inside the thing",c),u("Please don't leave an option empty"),i=i+1,p(!0),h.includes(c)||h.push(c),console.log(h))}else u("You cannot have more than 20 questions");t==0&&o==0&&s.length<20&&(b=="Options"&&n==0&&i==0||b=="Text")&&(s.push(r),N(j+1),L([]))}d||(y(!0),u("Please make an heading")),A(R+1)},J=()=>B=="BUILD_FORM"?{transition:"0.5s ease",width:"50px",height:"50px",borderRadius:"50px"}:{transition:"0.5s ease",width:"50px",height:"50px",borderRadius:"50px"},K=t=>{let o=[...s];if(g(o),t.options.length==0)t.options.push({id:t.options.length});else if(t.options.length<10){let n=0;for(let i=0;i<t.options.length;i++)(t.options[i].OptionSub==null||t.options[i].OptionSub==""||t.options[i].OptionSub==" ")&&(n=n+1,p(!0));n==0&&t.options.push({id:t.options.length})}else u("You can only have 10 options at most")};l.useEffect(()=>{z(V())},[]);function V(){return"xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var o=Math.random()*16|0,n=t=="x"?o:o&3|8;return n.toString(16)})}const X=()=>{let t=0,o=0,n=0,i=0;if(d){for(let r=0;r<s.length;r++)if(s[r].question==""&&(S(!0),t=t+1,x("Please enter the question")),s[r].answerType==""&&(s[r].question!=""&&u("Please select an answer"),o=o+1,x("Please select an answer option")),s[r].answerType=="Options")for(let a=0;a<s[r].options.length;a++)s[r].options.length<2?(n=n+1,x("Please do not leave an option empty"),u("Please have atleast 2 options"),p(!0)):(s[r].options[a].OptionSub==null||s[r].options[a].OptionSub==""||s[r].options[a].OptionSub==" "||s[r].options[a].OptionSub.length==0)&&(console.log("Inside the thing",a),x("Please do not leave an option empty"),u("Please don't leave an empty option"),i=i+1,p(!0),h.includes(a)||h.push(a),console.log(h));t==0&&o==0?(b=="Options"&&n==0&&i==0||b=="Text")&&q(!0):console.log("its not fully filled")}d||(y(!0),u("Please write the heading"))};if(W)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"Loading",children:e.jsx("h1",{children:"Loading..."})})});if(H.length>=4)return e.jsx(e.Fragment,{children:e.jsx("div",{className:"MaxLimitReached",children:e.jsx("div",{className:"MaxLimitCards",children:e.jsx("h1",{style:{fontWeight:500},children:"Sorry you've reached the max number of forms allowed for a single account!!"})})})});const Z=(t,o)=>{s.map((n,i)=>{t==i&&(o=="required"&&(n.required==!1?n.required=!0:n.required=!1),o=="multiselect"&&(n.multiselect==!1?n.multiselect=!0:n.multiselect=!1))})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"AppBuildForm",children:[e.jsxs("div",{className:"FormButtonsTabs",children:[e.jsx("h2",{style:{color:"white",fontWeight:500},children:"Create Form : "}),e.jsx("div",{className:"FormTopBarButtons",children:e.jsx("button",{onClick:()=>{G()},children:"Add Questions"})})]}),e.jsx("div",{className:"FormHeading",children:e.jsx("input",{type:"text",placeholder:T?"Please enter a form heading first":"Enter Form Heading",value:d,style:T?{border:"3px solid red"}:{border:"none"},onChange:t=>{I(t.target.value),y(!1)}})}),e.jsx("div",{className:"FormDesc",children:e.jsx("textarea",{placeholder:"Enter form description (Optional)",value:w,onChange:t=>{Q(t.target.value)}})}),s.map((t,o)=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"FormQuestions",style:t.isOpen==!0?{minHeight:"40vh"}:{minHeight:"20vh"},children:[e.jsxs("div",{className:"QuestionsTopPart",children:[e.jsx("input",{type:"text",style:F&&t.question==""&&t.id==o?{border:"3px solid red"}:{border:"none"},onChange:n=>{s[o].question=n.target.value,t.id==o&&S(!1);let i=[...s];g(i)},placeholder:F?`Please fill Q.no ${o+1} up first`:`${o+1}. Enter your Question`}),e.jsxs("div",{className:"FormButton",children:[e.jsxs("div",{className:"FormButtonLeft",children:[e.jsxs("div",{className:"Required",children:[e.jsx("input",{type:"checkbox",value:t.required,onClick:()=>{Z(t.id,"required")}}),e.jsx("label",{children:"Required"})]}),e.jsx("button",{onClick:()=>{let n=[...s];n.forEach(i=>{o==i.id&&(i.answerType="Text")}),g(n),t.options=[],t.isOpen=!1,P("Text")},style:s[o].answerType=="Text"?{background:"white",color:"#121212"}:{background:"#121212",color:"white"},children:"Text"}),e.jsx("button",{onClick:()=>{let n=[...s];n.forEach(i=>{o==i.id&&(i.answerType="Options",i.options.length==0&&i.options.push({id:0}))}),g(n),P("Options"),t.isOpen=!0},style:s[o].answerType=="Options"?{background:"white",color:"#121212"}:{background:"#121212",color:"white"},children:"Options"})]}),e.jsx("div",{className:"FormButtonRight",children:e.jsx("button",{style:t.isOpen?{display:"block"}:{border:"none",cursor:"default",display:"none"},disabled:!t.isOpen,onClick:()=>{K(t)},children:e.jsx("img",{className:"add",src:ne,alt:""})})})]})]}),e.jsx("div",{className:"QuestionsBottomPart",style:t.isOpen==!0?{minHeight:"20vh"}:{display:"none"},children:t.options.map((n,i)=>e.jsx(e.Fragment,{children:e.jsx("input",{onChange:r=>{s[o].options[i].OptionSub=r.target.value,p(!1)},style:k&&(n.OptionSub==null||n.OptionSub==""||n.OptionSub==" ")?{border:"2px solid red"}:{border:"none"},type:"text",placeholder:k&&(n.OptionSub==null||n.OptionSub==""||n.OptionSub==" ")?"Please enter some value":`Enter option no ${i+1}`})}))})]})})),e.jsx("div",{style:{width:"90vw",display:"flex",justifyContent:"flex-end",padding:"20px 5px 20px 5px"},children:e.jsx("button",{style:{color:"black",background:"white"},onClick:X,children:"Submit Form"})})]}),e.jsx("div",{className:"AppBuildForm_Popover",style:$?{zIndex:5}:{zIndex:-1},children:e.jsxs("div",{className:"SubmitTab",children:[e.jsxs("div",{className:"DatePicker",children:[e.jsx("h2",{style:{color:"black",fontWeight:500,marginBottom:"15px"},children:"Please Select Expiry date for the form!!"}),e.jsx("input",{type:"date",min:new Date().toISOString().split("T")[0],style:{width:"100%",backgroundColor:"#1f1f1f",color:"white",textTransform:"uppercase",fontWeight:600},value:v,onChange:t=>U(t.target.value)})]}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>q(!1),children:"Cancel"}),e.jsx("button",{disabled:!v,onClick:()=>{oe(C,f),ae({allData:s,globalToken:f,formID:C,date:v,heading:d,desc:w,nav:O})},children:"Submit"})]})]})}),e.jsx("div",{className:"Notification",style:m?window.screen.width<500?{width:"200px",height:"100px",transition:"0.5s ease"}:{width:"400px",height:"100px",transition:"0.5s ease"}:J(),children:e.jsx("div",{className:"Notification_sub",style:m?{}:{transition:"0.5s ease",borderRadius:"50px"},children:e.jsx("h3",{style:m?{transition:"0.5s ease",opacity:1}:{transition:"0.5s ease",opacity:0},children:m})})})]})}export{ce as default};
